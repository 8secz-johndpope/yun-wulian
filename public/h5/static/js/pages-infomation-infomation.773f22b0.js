(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-infomation-infomation"],{"15f5":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("c78e"),a={data:function(){return{userinfo:"",date:""}},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},onLoad:function(){this.userinfo=uni.getStorageSync("user"),this.date=this.userinfo.birthday},methods:{avatar:function(){var t=this;uni.chooseImage({count:1,sizeType:["compressed"],sourceType:["camera","album"],success:function(e){i.uploadFile({url:"user/upload/one",filePath:e.tempFilePaths[0],name:"file",success:function(n){0==n.code?uni.showToast({title:n.msg,mask:!1,duration:1500}):i.post({url:"user/profile/userInfo",data:{avatar:n.data.url},success:function(n){console.log(n),1==n.code&&(uni.setStorageSync("upload",1),t.userinfo.avatar=e.tempFilePaths[0],uni.showToast({title:"修改头像成功",icon:"success",duration:2e3})),0==n.code&&uni.showToast({title:"修改头像失败",icon:"none",duration:2e3})}})}})}})},formSubmit:function(t){var e=t.detail.value,n=this.userinfo;""!=e.nickname?e.nickname!=n.user_nickname||e.date!=n.birthday||e.sex!=n.sex?i.post({url:"user/profile/userInfo",data:{user_nickname:e.nickname,birthday:this.date,sex:e.sex},success:function(t){1==t.code&&(uni.setStorageSync("upload",1),uni.showToast({title:t.msg,icon:"success",duration:500}),setTimeout(function(t){uni.navigateBack()},500)),0==t.code&&uni.showToast({title:t.msg,icon:"none",duration:1e3})}}):uni.showToast({title:"信息无变化",duration:1500,icon:"none"}):uni.showToast({title:"昵称不能为空",duration:1500,icon:"none"})},bindDateChange:function(t){this.date=t.target.value},getDate:function(t){var e=new Date,n=e.getFullYear(),i=e.getMonth()+1,a=e.getDate();return"start"===t?n-=60:"end"===t&&(n+=2),i=i>9?i:"0"+i,a=a>9?a:"0"+a,"".concat(n,"-").concat(i,"-").concat(a)}}};e.default=a},"183e":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"uni-page-body[data-v-6f03a8a9]{background-color:#f1f1f1}.face[data-v-6f03a8a9]{text-align:center;padding-top:%?60?%}.face uni-image[data-v-6f03a8a9]{width:%?150?%;height:%?150?%;border-radius:100%}body.?%PAGE?%[data-v-6f03a8a9]{background-color:#f1f1f1}",""])},"321e":function(t,e,n){var i=n("183e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("fee086f6",i,!0,{sourceMap:!1,shadowMode:!1})},"6f3e":function(t,e,n){"use strict";n.r(e);var i=n("15f5"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},"772d":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"face"},[n("v-uni-image",{attrs:{src:t.userinfo.avatar?t.userinfo.avatar:"../../static/toux.jpg"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.avatar.apply(void 0,arguments)}}}),n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.avatar.apply(void 0,arguments)}}},[t._v("上传头像")])],1),n("v-uni-view",{staticClass:"uni-padding-wrap"},[n("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.formSubmit.apply(void 0,arguments)},reset:function(e){arguments[0]=e=t.$handleEvent(e),t.formReset.apply(void 0,arguments)}}},[n("v-uni-view",[n("v-uni-view",{staticClass:"uni-title"},[t._v("昵称")]),n("v-uni-view",{staticClass:"uni-list"},[n("v-uni-view",{staticClass:"uni-list-cell"},[n("v-uni-input",{staticClass:"uni-input",attrs:{name:"nickname",value:t.userinfo.user_nickname,placeholder:"请填写您的昵称"}})],1)],1)],1),n("v-uni-view",[n("v-uni-view",{staticClass:"uni-title"},[t._v("出生日期")]),n("v-uni-view",{staticClass:"uni-list"},[n("v-uni-view",{staticClass:"uni-list-cell"},[n("v-uni-view",{staticClass:"uni-list-cell-left"},[t._v("当前选择")]),n("v-uni-view",{staticClass:"uni-list-cell-db"},[n("v-uni-picker",{attrs:{mode:"date",value:t.date,start:t.startDate,end:t.endDate,name:"date"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDateChange.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(0==t.date?"1990-01-01":t.date))])],1)],1)],1)],1)],1),n("v-uni-view",[n("v-uni-view",{staticClass:"uni-title"},[t._v("性别")]),n("v-uni-radio-group",{staticClass:"uni-flex",attrs:{name:"sex"}},[1==t.userinfo.sex?n("v-uni-label",[n("v-uni-radio",{attrs:{value:"0"}}),t._v("男")],1):t._e(),0==t.userinfo.sex?n("v-uni-label",[n("v-uni-radio",{attrs:{value:"0",checked:!0}}),t._v("男")],1):t._e(),1==t.userinfo.sex?n("v-uni-label",[n("v-uni-radio",{attrs:{value:"1",checked:!0}}),t._v("女")],1):t._e(),0==t.userinfo.sex?n("v-uni-label",[n("v-uni-radio",{attrs:{value:"1"}}),t._v("女")],1):t._e()],1)],1),n("v-uni-view",{staticClass:"uni-btn-v uni-common-mt"},[n("v-uni-button",{staticClass:"btn-submit",attrs:{formType:"submit",type:"primary"}},[t._v("提交")])],1)],1)],1)],1)},o=[];n.d(e,"b",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return i})},"991e":function(t,e,n){"use strict";var i=n("321e"),a=n.n(i);a.a},c78e:function(t,e,n){"use strict";var i="web",a=(getApp(),"http://yun.jdwanxiang.com");t.exports={HOST:a,API_ROOT:a+"/api/",DeviceType:i,post:function(t){t.method="POST",this.request(t)},delete:function(t){t.method="DELETE",this.request(t)},get:function(t){t.method="GET",this.request(t)},put:function(t){t.method="PUT",this.request(t)},request:function(t){var e=this.API_ROOT,n="";try{n=uni.getStorageSync("token")}catch(o){}var a="";try{a=uni.getStorageSync("cookie")}catch(o){}console.log("[api][request] url:",t.url),console.log("[api][request] method:",t.method),console.log("[api][request] options.data:",t.data),console.log("[api][request] cookie:",a),uni.request({url:e+t.url,data:t.data,method:t.method?t.method:"POST",header:{"Content-Type":"application/json","XX-Token":n,"XX-Device-Type":i,Cookie:a},success:function(e){var n=e.data;2001==n.ret_code?uni.showModal({title:"提示",content:"登录已过期，请重新登录",success:function(t){t.confirm&&uni.navigateTo({url:"../login/login"})}}):t.success(n,e.header)},fail:function(e){t.fail&&t.fail(e)},complete:t.complete?t.complete:null})},uploadFile:function(t){t.url=this.API_ROOT+t.url;var e=this.getToken(),n=this,a=t.success;t.success=function(t){var e=JSON.parse(t.data);0==e.code&&e.data&&e.data.code&&10001==e.data.code?n.login():a(e)},t.header={"XX-Token":e,"XX-Device-Type":i},uni.uploadFile(t)},getToken:function(){var t="";try{t=uni.getStorageSync("token")}catch(e){}return t}}},ef12:function(t,e,n){"use strict";n.r(e);var i=n("772d"),a=n("6f3e");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("991e");var u,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"6f03a8a9",null,!1,i["a"],u);e["default"]=c.exports}}]);